@use "variables";
@use "iconButton";

.moon-bottom-sheet {
  position: fixed;
  display: grid;
  align-items: center;
  justify-items: center;
  pointer-events: none;
  visibility: hidden;
  overflow-x: hidden;
  margin: 0;
  padding: 0;
  inset: 0;
  height: 100%;
  width: 100%;
  max-height: none;
  max-width: none;
  color: inherit;
  background-color: transparent;
  transition:
    translate 0.3s ease-out,
    visibility 0.3s allow-discrete,
    background-color 0.3s ease-out,
    opacity 0.1s ease-out;
  overflow-y: hidden;
  overscroll-behavior: contain;
  z-index: 999;
  &::backdrop {
    display: none;
  }

  &.moon-bottom-sheet-open,
  &[open],
  &:target {
    pointer-events: auto;
    visibility: visible;
    opacity: 1;
    background-color: var(--color-background-backdrop);
    .moon-bottom-sheet-box {
      display: flex;
      translate: 0 0;
      scale: 1;
      opacity: 1;
    }
  }
  @starting-style {
    &.moon-bottom-sheet-open,
    &[open],
    &:target {
      visibility: hidden;
      opacity: 0;
    }
  }
}

.moon-bottom-sheet-box {
  grid-column-start: 1;
  grid-row-start: 1;
  position: relative;
  display: none;
  overflow: auto;
  flex-direction: column;
  width: 100%;
  height: 100%;
  max-height: 33vh;
  align-self: end;
  border-radius: var(--component-bottom-sheet-radius) var(--component-bottom-sheet-radius) 0 0;
  color: var(--color-text-primary);
  background-color: var(--component-bottom-sheet-background);
  box-shadow: variables.$shadow-300;
  scale: 95%;
  opacity: 0;
  overscroll-behavior: contain;

  :where(.moon-bottom-sheet-header) {
    display: grid;
    grid-auto-flow: column;
    align-items: center;
    padding: var(--sizing-padding-700) var(--sizing-padding-900);
    font: var(--font-weight-medium) var(--style-text-3xl-font-size) / var(--style-text-3xl-line-height)
      var(--font-default);
  }

  :where(.moon-bottom-sheet-close) {
    justify-self: end;

    @extend .moon-icon-button;
    @extend .moon-icon-button-sm;
    @extend .moon-icon-button-ghost;
  }

  :where(.moon-bottom-sheet-handle) {
    position: absolute;
    top: calc((var(--spacing-space-8) + var(--component-bottom-sheet-handle-height)) * -1);
    left: 50%;
    transform: translateX(-50%);
    width: var(--component-bottom-sheet-handle-width);
    height: var(--component-bottom-sheet-handle-height);
    border-radius: var(--radius-9999);
    background-color: var(--color-border-primary);
  }
}
